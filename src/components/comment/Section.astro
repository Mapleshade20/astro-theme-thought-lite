---
import Icon from "$components/Icon.astro";
import i18nit from "$i18n";
import Thread from "./Thread.svelte";

interface Props {
	locale: string;
	section: string;
	item: string;
}

const { locale, section, item } = Astro.props;
const t = i18nit(locale);

const env = import.meta.env;

// Check which OAuth providers are configured for comment authentication
const OAuth = {
	GitHub: env.GITHUB_CLIENT_ID && env.GITHUB_CLIENT_SECRET,
	Google: env.GOOGLE_CLIENT_ID && env.GOOGLE_CLIENT_SECRET,
	X: env.TWITTER_CLIENT_ID && env.TWITTER_CLIENT_SECRET
};
---

<Thread client:visible {locale} {section} {item} {OAuth}>
	<Icon name="svg-spinners:3-dots-move" size={25} slot="loading" inline />
	<Icon name="svg-spinners:pulse-3" size={30} slot="rendering" inline />
	<Icon name="svg-spinners:pulse-rings-3" title={t("comment.verify.progress")} slot="verifying" inline />
	<Icon name="lucide:signature" title={t("comment.author")} slot="author" />
	<Icon name="lucide:house" slot="home" inline />
	<Icon name="lucide:triangle-alert" slot="alert" inline />
	<Icon name="simple-icons:github" slot="GitHub" />
	<Icon name="simple-icons:google" slot="Google" />
	<Icon name="simple-icons:x" slot="X" />
	<Icon name="lucide:refresh-cw" title={t("comment.reload.name")} slot="reload" />
	<Icon name="lucide:clock-arrow-up" title={t("comment.sort.asc")} slot="asc" />
	<Icon name="lucide:clock-arrow-down" title={t("comment.sort.desc")} slot="desc" />
	<Icon name="lucide:reply" title={t("comment.reply")} slot="reply" />
	<Icon name="lucide:history" title={t("comment.history")} slot="history" />
	<Icon name="lucide:share-2" title={t("comment.share.name")} slot="share" />
	<Icon name="lucide:pencil" title={t("comment.edit.name")} slot="edit" />
	<Icon name="lucide:trash" title={t("delete")} slot="remove" />
	<Icon name="lucide:smile" slot="emoji" />
	<Icon name="lucide:file-search" title={t("comment.preview")} slot="preview" />
	<Icon name="lucide:user-round" title={t("oauth.name")} slot="oauth" />
	<Icon name="lucide:send" title={t("comment.submit")} slot="submit" />
</Thread>
